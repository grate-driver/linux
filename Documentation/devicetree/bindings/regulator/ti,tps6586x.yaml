# SPDX-License-Identifier: (GPL-2.0 OR BSD-2-Clause)
%YAML 1.2
---
$id: "http://devicetree.org/schemas/regulator/ti,tps6586x.yaml#"
$schema: "http://devicetree.org/meta-schemas/core.yaml#"

title: TPS6586x family of regulators

maintainers:
  - David Heidelberg <david@ixit.cz>

properties:
  compatible:
    const: ti,tps6586x

  reg: true
  interrupts: true

  "#gpio-cells":
    const: 2

  gpio-controller: true
  regulators:
    type: object
    description: |
      A node that houses a sub-node for each regulator within the
      device. Each sub-node is identified using the node's name (or the deprecated
      regulator-compatible property if present), with valid values listed below.
      The content of each sub-node is defined by the standard binding for
      regulators; see regulator.txt.
      sys, sm[0-2], ldo[0-9] and ldo_rtc

  sys-supply:
    description: The input supply for SYS.

  vin-sm0-supply:
    description: The input supply for the SM0.
  vin-sm1-supply:
    description: The input supply for the SM1.
  vin-sm2-supply:
    description: The input supply for the SM2.

  vinldo01-supply:
    description: The input supply for the LDO1 and LDO2
  vinldo23-supply:
    description: The input supply for the LDO2 and LDO3
  vinldo4-supply:
    description: The input supply for the LDO4
  vinldo678-supply:
    description: The input supply for the LDO6, LDO7 and LDO8
  vinldo9-supply:
    description: The input supply for the LDO9

  ti,system-power-controller:
    type: boolean
    description: |
      Telling whether or not this pmic is controlling the system power.

required:
  - compatible
  - reg
  - interrupts
  - '#gpio-cells'
  - gpio-controller
  - regulators
  - sys-supply
  - vin-sm0-supply
  - vin-sm1-supply
  - vin-sm2-supply
  - vinldo01-supply
  - vinldo23-supply
  - vinldo678-supply


# Each regulator is defined using the standard binding for regulators.
# Note: LDO5 and LDO_RTC is supplied by SYS regulator internally and driver
#       take care of making proper parent child relationship.

additionalProperties: false

examples:
  - |
    i2c {
      #address-cells = <1>;
      #size-cells = <0>;

      pmu: tps6586x@34 {
        compatible = "ti,tps6586x";
        reg = <0x34>;
        interrupts = <0 88 0x4>;

        #gpio-cells = <2>;
        gpio-controller;

        ti,system-power-controller;

        sys-supply = <&some_reg>;
        vin-sm0-supply = <&some_reg>;
        vin-sm1-supply = <&some_reg>;
        vin-sm2-supply = <&some_reg>;
        vinldo01-supply = <&some_reg>;
        vinldo23-supply = <&some_reg>;
        vinldo4-supply = <&some_reg>;
        vinldo678-supply = <&some_reg>;
        vinldo9-supply = <&some_reg>;

        regulators {
          sys_reg: sys {
            regulator-name = "vdd_sys";
            regulator-boot-on;
            regulator-always-on;
          };

          sm0_reg: sm0 {
            regulator-min-microvolt = < 725000>;
            regulator-max-microvolt = <1500000>;
            regulator-boot-on;
            regulator-always-on;
          };

          sm1_reg: sm1 {
            regulator-min-microvolt = < 725000>;
            regulator-max-microvolt = <1500000>;
            regulator-boot-on;
            regulator-always-on;
          };

          sm2_reg: sm2 {
            regulator-min-microvolt = <3000000>;
            regulator-max-microvolt = <4550000>;
            regulator-boot-on;
            regulator-always-on;
          };

          ldo0_reg: ldo0 {
            regulator-name = "PCIE CLK";
            regulator-min-microvolt = <3300000>;
            regulator-max-microvolt = <3300000>;
          };

          ldo1_reg: ldo1 {
            regulator-min-microvolt = < 725000>;
            regulator-max-microvolt = <1500000>;
          };

          ldo2_reg: ldo2 {
            regulator-min-microvolt = < 725000>;
            regulator-max-microvolt = <1500000>;
          };

          ldo3_reg: ldo3 {
            regulator-min-microvolt = <1250000>;
            regulator-max-microvolt = <3300000>;
          };

          ldo4_reg: ldo4 {
            regulator-min-microvolt = <1700000>;
            regulator-max-microvolt = <2475000>;
          };

          ldo5_reg: ldo5 {
            regulator-min-microvolt = <1250000>;
            regulator-max-microvolt = <3300000>;
          };

          ldo6_reg: ldo6 {
            regulator-min-microvolt = <1250000>;
            regulator-max-microvolt = <3300000>;
          };

          ldo7_reg: ldo7 {
            regulator-min-microvolt = <1250000>;
            regulator-max-microvolt = <3300000>;
          };

          ldo8_reg: ldo8 {
            regulator-min-microvolt = <1250000>;
            regulator-max-microvolt = <3300000>;
          };

          ldo9_reg: ldo9 {
            regulator-min-microvolt = <1250000>;
            regulator-max-microvolt = <3300000>;
          };
        };
      };
    };
