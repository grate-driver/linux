# SPDX-License-Identifier: (GPL-2.0 OR BSD-2-Clause)
%YAML 1.2
---
$id: "http://devicetree.org/schemas/spi/nvidia,tegra20-sflash.yaml#"
$schema: "http://devicetree.org/meta-schemas/core.yaml#"

title: NVIDIA Tegra20 SFLASH controller

maintainers:
  - Thierry Reding <treding@nvidia.com>
  - Jon Hunter <jonathanh@nvidia.com>

allOf:
  - $ref: "spi-controller.yaml"

properties:
  compatible:
    const: nvidia,tegra20-sflash

  reg: true
  interrupts: true

  clocks:
    maxItems: 1

  resets:
    maxItems: 1
  reset-names:
    items:
      - const: spi

  dmas:
    minItems: 2
    maxItems: 2

  dma-names:
    items:
      - const: rx
      - const: tx

  spi-max-frequency: true

  '#address-cells':
    const: 1
  '#size-cells':
    const: 0

required:
  - compatible
  - reg
  - interrupts
  - clocks
  - resets
  - reset-names
  - dmas
  - dma-names

unevaluatedProperties: false

examples:
  - |
    spi@7000c380 {
        compatible = "nvidia,tegra20-sflash";
        reg = <0x7000c380 0x80>;
        interrupts = <0 39 0x04>;
        spi-max-frequency = <25000000>;
        #address-cells = <1>;
        #size-cells = <0>;
        clocks = <&tegra_car 43>;
        resets = <&tegra_car 43>;
        reset-names = "spi";
        dmas = <&apbdma 11>, <&apbdma 11>;
        dma-names = "rx", "tx";
    };
