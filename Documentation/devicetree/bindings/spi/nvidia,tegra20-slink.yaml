# SPDX-License-Identifier: (GPL-2.0 OR BSD-2-Clause)
%YAML 1.2
---
$id: "http://devicetree.org/schemas/spi/nvidia,tegra20-slink.yaml#"
$schema: "http://devicetree.org/meta-schemas/core.yaml#"

title: NVIDIA Tegra20/Tegra30 SLINK controller

maintainers:
  - Thierry Reding <treding@nvidia.com>
  - Jon Hunter <jonathanh@nvidia.com>

allOf:
  - $ref: "spi-controller.yaml"

properties:
  compatible:
    anyOf:
      - items:
          - const: nvidia,tegra30-slink
          - const: nvidia,tegra20-slink
      - items:
          enum:
            - nvidia,tegra20-slink
            - nvidia,tegra30-slink

  reg:
    description: Should contain SLINK registers location and length.

  interrupts:
    description: Should contain SLINK interrupts.

  clocks: true
  resets:
    maxItems: 1

  reset-names:
    items:
      - const: spi

  dmas:
    minItems: 2
    maxItems: 2

  dma-names:
    items:
      - const: rx
      - const: tx

  spi-max-frequency: true
  operating-points-v2: true
  power-domains: true

  '#address-cells':
    const: 1
  '#size-cells':
    const: 0

required:
  - compatible
  - reg
  - interrupts
  - clocks
  - resets
  - reset-names
  - dmas
  - dma-names

unevaluatedProperties: false

examples:
  - |
    spi@7000d600 {
      compatible = "nvidia,tegra20-slink";
      reg = <0x7000d600 0x200>;
      interrupts = <0 82 0x04>;
      spi-max-frequency = <25000000>;
      #address-cells = <1>;
      #size-cells = <0>;
      clocks = <&tegra_car 44>;
      resets = <&tegra_car 44>;
      reset-names = "spi";
      dmas = <&apbdma 16>, <&apbdma 16>;
      dma-names = "rx", "tx";
    };
