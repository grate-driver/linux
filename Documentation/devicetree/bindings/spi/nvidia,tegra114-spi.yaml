# SPDX-License-Identifier: (GPL-2.0 OR BSD-2-Clause)
%YAML 1.2
---
$id: "http://devicetree.org/schemas/spi/nvidia,tegra114-spi.yaml#"
$schema: "http://devicetree.org/meta-schemas/core.yaml#"

title: NVIDIA Tegra114 SPI controller

maintainers:
  - None of None <none@none.com>

properties:
  compatible:
    anyOf:
      - items:
          - enum:
              - nvidia,tegra124
              - nvidia,tegra132
              - nvidia,tegra210
          - const: nvidia,tegra114-slink
      - items:
          enum:
            - nvidia,tegra114-spi
            - nvidia,tegra124-spi
            - nvidia,tegra132-spi
            - nvidia,tegra210-spi

  reg:
    description: Should contain SPI registers location and length.

  interrupts:
    description: Should contain SPI interrupts.

  clocks: true
  clock-names:
    items:
      - const: spi
  resets:
    maxItems: 1
  reset-names:
    items:
      - const: spi
  dmas:
    minItems: 2
    maxItems: 2

  dma-names:
    items:
      - const: rx
      - const: tx

  spi-max-frequency: true

  nvidia,tx-clk-tap-delay:
    $ref: /schemas/types.yaml#/definitions/uint32
    minimum: 0
    maximum: 63
    description: |
      Delays the clock going out to the external device
      with this tap value. This property is used to tune the outgoing data from
      Tegra SPI master with respect to outgoing Tegra SPI master clock.
      Tap values vary based on the platform design trace lengths from Tegra SPI
      to corresponding slave devices.

  nvidia,rx-clk-tap-delay:
    $ref: /schemas/types.yaml#/definitions/uint32
    minimum: 0
    maximum: 63
    description: |
      Delays the clock coming in from the external device
      with this tap value. This property is used to adjust the Tegra SPI master
      clock with respect to the data from the SPI slave device.
      Tap values vary based on the platform design trace lengths from Tegra SPI
      to corresponding slave devices.

  '#address-cells':
    const: 1
  '#size-cells':
    const: 0

required:
  - compatible
  - reg
  - clocks
  - clock-names
  - resets
  - reset-names
  - dmas
  - dma-names

additionalProperties: true

examples:
  - |
    spi@7000d600 {
      compatible = "nvidia,tegra114-spi";
      reg = <0x7000d600 0x200>;
      interrupts = <0 82 0x04>;
      spi-max-frequency = <25000000>;
      #address-cells = <1>;
      #size-cells = <0>;
      clocks = <&tegra_car 44>;
      clock-names = "spi";
      resets = <&tegra_car 44>;
      reset-names = "spi";
      dmas = <&apbdma 16>, <&apbdma 16>;
      dma-names = "rx", "tx";
    };
