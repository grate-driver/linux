# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---

$id: http://devicetree.org/schemas/sound/nvidia,tegra-audio-sgtl5000.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: NVIDIA Tegra audio complex, with SGTL5000 codec

maintainers:
  - Marcel Ziswiler <marcel.ziswiler@toradex.com>

properties:
  compatible:
    anyOf:
      - items:
          - enum:
              - toradex,tegra-audio-sgtl5000-apalis_t30
              - toradex,tegra-audio-sgtl5000-colibri_t30
              - toradex,tegra-audio-sgtl5000-apalis_tk1
          - const: nvidia,tegra-audio-sgtl5000
      - const: nvidia,tegra-audio-sgtl5000

  clocks:
    items:
      - description: PLL A clock
      - description: PLL A OUT0 clock
      - description: The Tegra cdev1/extern1 clock, which feeds the card's mclk

  clock-names:
    items:
      - const: pll_a
      - const: pll_a_out0
      - const: mclk

  nvidia,model:
    $ref: /schemas/types.yaml#/definitions/string
    description: User-visible name of this sound complex.

  nvidia,audio-routing:
    $ref: /schemas/types.yaml#/definitions/non-unique-string-array
    description: |
      A list of the connections between audio components.
      Each entry is a pair of strings, the first being the connection's sink,
      the second being the connection's source. Valid names for sources and
      sinks are the SGTL5000's pins (as documented in its binding), and the jacks
      on the board:

      * Headphone Jack
      * Line In Jack
      * Mic Jack

  nvidia,i2s-controller:
    $ref: /schemas/types.yaml#/definitions/phandle
    description: Phandle of the Tegra I2S controller.

  nvidia,audio-codec:
    $ref: /schemas/types.yaml#/definitions/phandle
    description: Phandle of the SGTL5000 audio codec.

additionalProperties: false

examples:
  - |
    #include <dt-bindings/clock/tegra30-car.h>
    sound {
      compatible = "toradex,tegra-audio-sgtl5000-apalis_t30",
                   "nvidia,tegra-audio-sgtl5000";
      nvidia,model = "Toradex Apalis T30";
      nvidia,audio-routing =
              "Headphone Jack", "HP_OUT",
              "LINE_IN", "Line In Jack",
              "MIC_IN", "Mic Jack";
      nvidia,i2s-controller = <&tegra_i2s2>;
      nvidia,audio-codec = <&sgtl5000>;
      clocks = <&tegra_car TEGRA30_CLK_PLL_A>,
               <&tegra_car TEGRA30_CLK_PLL_A_OUT0>,
               <&tegra_car TEGRA30_CLK_EXTERN1>;
      clock-names = "pll_a", "pll_a_out0", "mclk";
    };
